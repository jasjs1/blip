<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/svg/favicon.svg" />
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/svg/favicon.svg" />
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/svg/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/dist/output.css" rel="stylesheet">
    <link rel="stylesheet" href="app.css">
    <title>Blip - App</title>
</head>
<body>

    


    <div class="navigation-bar">
        <nav>
            
          <ul>
            <!-- You can add other links inside of this-->
            <h2 class="text-sky-500 font-bold text-xl" id="txt-lg">Blip.co</h2>
            <img class="account" src="/assets/svg/person.svg" height="40" width="40">
        </ul>
        </nav>
      </div>
      

    <div class="create-post">
        <form id="post-form">
          <input type="text" class="post-maker" id="post-maker" placeholder="Write something...">
          <button type="submit" class="publish-btn" id="publish-btn">Publish</button>
          <div class="addons" class="flex">
            <img src="/assets/svg/app/tag.svg" width="35" height="35" alt="Error showing the tag SVG. Try refreshing the page." onclick="showTagDiv()">
            <img src="/assets/svg/app/link.svg" width="35" height="35" alt="Error showing the link SVG. Try refreshing the page." onclick="createLink()">
          </div>
        </form>
      </div>
      
      <div id="assignTag" class="assignTag">
        <p class="text-sm text-sky-500">Assign a tag to this Blip:</p>
        <select id="blip-tag" required>
          <option value="Uncategorized">Uncategorized</option>
          <option value="Tech">Tech</option>
          <!-- Add other options here -->
        </select>
      </div>
      
      <div id="posts"></div>
      
      <script>
const form = document.getElementById('post-form');
const postsContainer = document.getElementById('posts');
const assignTagDiv = document.getElementById('assignTag');

// Check if name exists in local storage
let name = localStorage.getItem('name');
if (!name) {
  // If not, prompt the user for their name and store it in local storage
  name = prompt('Please enter your name:');
  localStorage.setItem('name', name);
}

// Load existing posts from local storage
const savedPosts = JSON.parse(localStorage.getItem('posts')) || [];

// Render existing posts
for (let i = savedPosts.length - 1; i >= 0; i--) {
  const post = savedPosts[i];

  // Create a new post element
  const postElement = document.createElement('div');
  postElement.classList.add('post');
  const author = localStorage.getItem('name');
  postElement.innerHTML = `
    <h2><span id="author">${author}</span></h2>
    <h2 style="font-size: 1.2rem; margin-bottom: 5px;">${post.title}</h2>
    <h4 style="margin-top: -1px; color: #fff;">${post.tags}</h4>
  `;

  // Add the new post to the top of the list
  postsContainer.appendChild(postElement);

  // Attach click event listener to bookmark button
  const bookmarkButton = document.createElement('button');
  bookmarkButton.classList.add('bookmark-button');
  bookmarkButton.textContent = 'Bookmark';
  bookmarkButton.addEventListener('click', function() {
    // Retrieve existing bookmarks from localStorage or initialize an empty array
    const bookmarks = JSON.parse(localStorage.getItem('bookmarks')) || [];

    // Check if the post is already bookmarked
    const bookmarkIndex = bookmarks.findIndex(bookmark => bookmark.title === post.title);
    if (bookmarkIndex !== -1) {
      // Post is already bookmarked, so remove it
      bookmarks.splice(bookmarkIndex, 1);
      console.log('Removed ' + post.title + ' from post bookmarks.');
    } else {
      // Post is not bookmarked, so add it
      bookmarks.push(post);
      console.log('Added ' + post.title + ' to post bookmarks.');
    }

    // Save the updated bookmarks array to localStorage
    localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
  });

  postElement.appendChild(bookmarkButton);
}

// Show the assign tag div when the tag icon is clicked
function showTagDiv() {
  assignTagDiv.style.display = 'block';
}

// Add new post and save to local storage
form.addEventListener('submit', (event) => {
  event.preventDefault();

  // Get the input values
  const title = document.getElementById('post-maker').value.trim();
  const tags = document.getElementById('blip-tag').value.trim();

  // Create a new post object with title, tags, and a date property
  const post = {
    title,
    tags,
    date: Date.now()
  };

  // Create a new post element
  const postElement = document.createElement('div');
  postElement.classList.add('post');
  const author = localStorage.getItem('name');
  postElement.innerHTML = `
    <h2><span id="author">${author}</span></h2>
    <h2 style="font-size: 1.2rem; margin-bottom: 5px;">${post.title}</h2>
    <h4 class="text-sky-500 font-bold text-sm">${post.tags}</h4>
  `;

  // Add the new post to the top of the list
  postsContainer.prepend(postElement);

  // Add the new post to the beginning of the savedPosts array
  savedPosts.unshift(post);

  // Save the updated savedPosts array to local storage
  localStorage.setItem('posts', JSON.stringify(savedPosts));

  // Reset the form
  form.reset();
});

      </script>
      
      


    
    
</body>
<script src="script.js"></script>
<script src="addons.js"></script>
<script src="sendPost.js"></script>
</html>
 
